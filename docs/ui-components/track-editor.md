# 🎛️ UIコンポーネント仕様：Track Editor（波形表示エリア）

このドキュメントでは、各トラックの波形を表示し、マーカーやABループを扱うエリアの仕様を定義します。

---

## 🧩 配置場所

* 右パネルの中央〜下部に配置
* トラックごとに横並び表示（左→右）、画面端で折り返し（改行）

---

## 🌊 波形表示

| 項目       | 内容                                 |
| -------- | ---------------------------------- |
| 使用ライブラリ  | WaveSurfer.js                      |
| 表示単位     | トラックごと（プレイリスト内の各音源ファイル）            |
| レンダリング方式 | HTML5 Canvas or WebAudio rendering |
| 配色       | 波形はグレー or プレイヤーカラー、背景は白 or 薄いグレー系  |

---

## 🔁 ABループ機能

* トラックをまたいだ範囲指定に対応
* A点とB点はフローティングマーカーで表示
* マウスまたはタッチ操作で開始・終了位置を設定／調整可能
* A/Bマーカーはドラッグ可能
* 有効時はループ範囲に色付き背景で強調表示

---

## 📍 マーカー機能

| 項目      | 内容                                   |
| ------- | ------------------------------------ |
| マーカーの種類 | 任意の再生位置にユーザーが設置可能                    |
| 表示      | デフォルトでは非表示、ホバー時にツールチップ表示（名前含む）       |
| 編集      | 位置はドラッグで調整可能、名前変更は右パネルで行う（予定）        |
| ストレージ保存 | プレイリスト単位で localStorage/IndexedDB に保存 |

---

## 🔍 ズーム機能

* 全トラック共通のズームスライダーで拡大・縮小可能
* 対象は波形スケール（横幅方向）
* UIは右上にフローティング配置

---

## 🖱️ 操作仕様

| 操作             | 動作                   |
| -------------- | -------------------- |
| トラッククリック       | 再生位置の変更（クリック位置へジャンプ） |
| ドラッグ操作         | ABループ範囲・マーカー位置調整     |
| マウスホイール + Ctrl | ズームイン／アウト            |

---

## 🧮 データ構造（トラック）

```ts
interface Track {
  id: string;
  fileName: string;
  duration: number;
  audioBuffer: AudioBuffer;
  markers: Marker[];
}

interface Marker {
  id: string;
  position: number; // 秒単位
  label?: string;
}
```

---